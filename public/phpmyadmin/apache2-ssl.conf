<IfModule mod_ssl.c>
    # <VirtualHost *:80>
    #     Redirect permanent / https://phpmyadmin.local/
    # </VirtualHost>
    <VirtualHost *:443>
        ServerAdmin phpmyadmin@avnlearn.com
        ServerName phpmyadmin.local
        DocumentRoot /usr/share/phpmyadmin
        ServerAlias www.phpmyadmin.local
        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/phpmyadmin.pem
        SSLCertificateKeyFile /etc/ssl/private/phpmyadmin.pem
        <Directory /usr/share/phpmyadmin>
            Options SymLinksIfOwnerMatch
            DirectoryIndex index.php
            <IfModule mod_php8.c>
                php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp
                php_admin_value open_basedir /usr/share/phpmyadmin/:/usr/share/doc/phpmyadmin/:/e>
            </IfModule>
        #    AllowOverride All
        #    Options -Indexes
        #    Require all granted
        </Directory>
        <Directory /usr/share/phpmyadmin/templates>
            Require all denied
        </Directory>
        <Directory /usr/share/phpmyadmin/libraries>
            Require all denied
        </Directory>
        ErrorLog /phpmyadmin.local_ssl_error.log
        CustomLog /phpmyadmin.local_ssl_access.log combined
        # Security Headers
        Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains" env=HTTPS
        Header always set X-Content-Type-Options "nosniff"
        Header always set X-XSS-Protection "1; mode=block"
        Header always set X-Frame-Options "DENY"
        Header always set Content-Security-Policy "default-src 'self';"
    </VirtualHost>
</IfModule>